# マイグレーションガイド

## v0.4.21 から v1.0.0 へのマイグレーションガイド

このガイドでは、ライブラリのバージョン`0.4.21`から`1.0.0`への移行に必要な変更点を詳しく説明します。メジャーアップデートが導入され、その結果、変更点が壊れています。

### 主な変更点

#### 変更: イベントストアのリファクタリング

- イベントストア・コンストラクタの変更
  `NewEventStore` 関数の名前が `NewEventStoreOnDynamoDB` に変更されました。移行する場合は、`NewEventStore` のインスタンスをすべて `NewEventStoreOnDynamoDB` に置き換えてください。

  **移行前:**
  ```go
  eventStore := NewEventStore(dynamodbClient, "journal", "snapshot", ...)
  ```

  **移行後:**
  ```go
  eventStore := NewEventStoreOnDynamoDB(dynamodbClient, "journal", "snapshot", ...)
  ```

- インターフェースの実装
  `EventStore` はインタフェースに変更され、インスタンス化され、コード内でどのように扱われるかに影響します。あなたの実装が新しいインターフェイス構造に合わせていることを確認してください。

#### 追加: オンメモリー用イベントストア

- オンメモリ用のイベントストア `EventStoreOnMemory` が導入されました。これはテストやDynamoDBベースのストアが必要ないシナリオに使用できる。

  **使用例**
  ```go
  eventStore := NewEventStoreOnMemory()
  ```

### マイナーな変更点

- `go.mod` の依存関係が更新された。プロジェクトの依存関係がこれらの変更に対応していることを確認してください。

### 一般的なアドバイス

- EventStore` と相互作用するカスタム実装を見直してください。それらが新しいインターフェイスに準拠していることを確認してください。
- イベント・ストアと相互作用するアプリケーションのすべての部分を徹底的にテストし、これらの変更で期待通りに機能することを確認してください。

さらに詳しいサポートや説明については、ライブラリの更新されたドキュメントを参照するか、サポート・コミュニティに連絡してください。
